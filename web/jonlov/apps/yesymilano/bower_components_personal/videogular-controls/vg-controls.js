"use strict";angular.module("com.2fdevs.videogular.plugins.controls",[]).run(["$templateCache",function($templateCache){$templateCache.put("vg-templates/vg-controls",'<div class="controls-container" ng-mousemove="onMouseMove()" ng-class="animationClass" ng-transclude></div>')}]).directive("vgControls",["$timeout","VG_STATES",function($timeout,VG_STATES){return{restrict:"E",require:"^videogular",transclude:!0,templateUrl:function(elem,attrs){return attrs.vgTemplate||"vg-templates/vg-controls"},scope:{vgAutohide:"=?",vgAutohideTime:"=?"},link:function(scope,elem,attr,API){var hideInterval,autoHideTime=2e3;scope.API=API,scope.onMouseMove=function(){scope.vgAutohide&&scope.showControls()},scope.setAutohide=function(value){value&&API.currentState==VG_STATES.PLAY?hideInterval=$timeout(scope.hideControls,autoHideTime):(scope.animationClass="",$timeout.cancel(hideInterval),scope.showControls())},scope.setAutohideTime=function(value){autoHideTime=value},scope.hideControls=function(){scope.animationClass="hide-animation"},scope.showControls=function(){scope.animationClass="show-animation",$timeout.cancel(hideInterval),scope.vgAutohide&&API.currentState==VG_STATES.PLAY&&(hideInterval=$timeout(scope.hideControls,autoHideTime))},API.isConfig?scope.$watch("API.config",function(){if(scope.API.config){var ahValue=scope.API.config.plugins.controls.autohide||!1,ahtValue=scope.API.config.plugins.controls.autohideTime||2e3;scope.vgAutohide=ahValue,scope.vgAutohideTime=ahtValue,scope.setAutohideTime(ahtValue),scope.setAutohide(ahValue)}}):(void 0!=scope.vgAutohide&&scope.$watch("vgAutohide",scope.setAutohide),void 0!=scope.vgAutohideTime&&scope.$watch("vgAutohideTime",scope.setAutohideTime))}}}]),angular.module("com.2fdevs.videogular.plugins.controls").run(["$templateCache",function($templateCache){$templateCache.put("vg-templates/vg-fullscreen-button",'<button class="iconButton" ng-click="onClickFullScreen()" ng-class="fullscreenIcon" aria-label="Toggle full screen" type="button"> </button>')}]).directive("vgFullscreenButton",[function(){return{restrict:"E",require:"^videogular",scope:{},templateUrl:function(elem,attrs){return attrs.vgTemplate||"vg-templates/vg-fullscreen-button"},link:function(scope,elem,attr,API){scope.onChangeFullScreen=function(isFullScreen){scope.fullscreenIcon={enter:!isFullScreen,exit:isFullScreen}},scope.onClickFullScreen=function(){API.toggleFullScreen()},scope.fullscreenIcon={enter:!0},scope.$watch(function(){return API.isFullScreen},function(newVal,oldVal){newVal!=oldVal&&scope.onChangeFullScreen(newVal)})}}}]),angular.module("com.2fdevs.videogular.plugins.controls").run(["$templateCache",function($templateCache){$templateCache.put("vg-templates/vg-play-pause-button",'<button class="iconButton" ng-click="onClickPlayPause()" ng-class="playPauseIcon" aria-label="Play/Pause" type="button"></button>')}]).directive("vgPlayPauseButton",["VG_STATES",function(VG_STATES){return{restrict:"E",require:"^videogular",scope:{},templateUrl:function(elem,attrs){return attrs.vgTemplate||"vg-templates/vg-play-pause-button"},link:function(scope,elem,attr,API){scope.setState=function(newState){switch(newState){case VG_STATES.PLAY:scope.playPauseIcon={pause:!0};break;case VG_STATES.PAUSE:scope.playPauseIcon={play:!0};break;case VG_STATES.STOP:scope.playPauseIcon={play:!0}}},scope.onClickPlayPause=function(){API.playPause()},scope.playPauseIcon={play:!0},scope.$watch(function(){return API.currentState},function(newVal,oldVal){scope.setState(newVal)})}}}]),angular.module("com.2fdevs.videogular.plugins.controls").run(["$templateCache",function($templateCache){$templateCache.put("vg-templates/vg-playback-button",'<button class="playbackValue iconButton" ng-click="onClickPlayback()">{{playback}}x</button>')}]).directive("vgPlaybackButton",[function(){return{restrict:"E",require:"^videogular",templateUrl:function(elem,attrs){return attrs.vgTemplate||"vg-templates/vg-playback-button"},link:function(scope,elem,attr,API){scope.playback="1",scope.setPlayback=function(playback){scope.playback=playback,API.setPlayback(parseFloat(playback))},scope.onClickPlayback=function(){var playbackOptions=["0.5","1","1.5","2"],nextPlaybackRate=playbackOptions.indexOf(scope.playback.toString())+1;nextPlaybackRate>=playbackOptions.length?scope.playback=playbackOptions[0]:scope.playback=playbackOptions[nextPlaybackRate],scope.setPlayback(scope.playback)},scope.$watch(function(){return API.playback},function(newVal,oldVal){newVal!=oldVal&&scope.setPlayback(newVal)})}}}]),angular.module("com.2fdevs.videogular.plugins.controls").directive("vgScrubBarBuffer",[function(){return{restrict:"E",require:"^videogular",link:function(scope,elem,attr,API){var percentTime=0;scope.onUpdateBuffer=function(newBuffer){"number"==typeof newBuffer&&API.totalTime?(percentTime=100*(newBuffer/API.totalTime),elem.css("width",percentTime+"%")):elem.css("width",0)},scope.$watch(function(){return API.bufferEnd},function(newVal,oldVal){scope.onUpdateBuffer(newVal)})}}}]),angular.module("com.2fdevs.videogular.plugins.controls").run(["$templateCache",function($templateCache){$templateCache.put("vg-templates/vg-scrub-bar-cue-points",'<div class="cue-point-timeline"><div ng-repeat="cuePoint in vgCuePoints" class="cue-point" ng-style="cuePoint.$$style"></div></div>')}]).directive("vgScrubBarCuePoints",[function(){return{restrict:"E",require:"^videogular",templateUrl:function(elem,attrs){return attrs.vgTemplate||"vg-templates/vg-scrub-bar-cue-points"},scope:{vgCuePoints:"="},link:function(scope,elem,attr,API){scope.onPlayerReady=function(){scope.updateCuePoints(scope.vgCuePoints)},scope.updateCuePoints=function(cuePoints){var totalWidth;if(cuePoints){totalWidth=parseInt(elem[0].clientWidth);for(var i=0,l=cuePoints.length;l>i;i++){var end=cuePoints[i].timeLapse.end>=0?cuePoints[i].timeLapse.end:cuePoints[i].timeLapse.start+1,cuePointDuration=1e3*(end-cuePoints[i].timeLapse.start),position=100*cuePoints[i].timeLapse.start/Math.round(API.totalTime/1e3)+"%",percentWidth=0;"number"==typeof cuePointDuration&&API.totalTime&&(percentWidth=100*cuePointDuration/API.totalTime+"%"),cuePoints[i].$$style={width:percentWidth,left:position}}}},scope.$watch("vgCuePoints",scope.updateCuePoints),scope.$watch(function(){return API.totalTime},function(newVal,oldVal){newVal>0&&scope.onPlayerReady()})}}}]),angular.module("com.2fdevs.videogular.plugins.controls").directive("vgScrubBarCurrentTime",[function(){return{restrict:"E",require:"^videogular",link:function(scope,elem,attr,API){var percentTime=0;scope.onUpdateTime=function(newCurrentTime){"number"==typeof newCurrentTime&&API.totalTime?(percentTime=100*(newCurrentTime/API.totalTime),elem.css("width",percentTime+"%")):elem.css("width",0)},scope.$watch(function(){return API.currentTime},function(newVal,oldVal){scope.onUpdateTime(newVal)})}}}]),angular.module("com.2fdevs.videogular.plugins.controls").run(["$templateCache",function($templateCache){$templateCache.put("vg-templates/vg-scrub-bar-thumbnails",'<div class="vg-thumbnails" ng-show="thumbnails" ng-style="thumbnailContainer"><div class="image-thumbnail" ng-style="thumbnails"></div></div><div class="background"></div>')}]).directive("vgScrubBarThumbnails",["VG_UTILS",function(VG_UTILS){return{restrict:"E",require:"^videogular",templateUrl:function(elem,attrs){return attrs.vgTemplate||"vg-templates/vg-scrub-bar-thumbnails"},scope:{vgThumbnails:"="},link:function(scope,elem,attr,API){var thumbnailsWidth=0,thumbWidth=0,slider=elem[0].querySelector(".background"),isStrip="string"==typeof scope.vgThumbnails;scope.thumbnails=!1,scope.thumbnailContainer={},scope.getOffset=function(event){for(var el=event.target,x=0;el&&!isNaN(el.offsetLeft);)x+=el.offsetLeft-el.scrollLeft,el=el.offsetParent;return event.clientX-x},scope.onLoadThumbnails=function(event){thumbnailsWidth=event.currentTarget.naturalWidth,thumbWidth=thumbnailsWidth/100},scope.onLoadThumbnail=function(event){thumbWidth=event.currentTarget.naturalWidth},scope.updateThumbnails=function(second){var percentage=Math.round(100*second/(API.totalTime/1e3)),thPos=slider.scrollWidth*percentage/100-thumbWidth/2;if(isStrip){var bgPos=Math.round(thumbnailsWidth*percentage/100);scope.thumbnailContainer={width:thumbWidth+"px",left:thPos+"px"},scope.thumbnails={"background-image":'url("'+scope.vgThumbnails+'")',"background-position":-bgPos+"px 0px"}}else{var secondsByPixel=API.totalTime/slider.scrollWidth/1e3,lapse={start:Math.floor(second-secondsByPixel/2),end:Math.ceil(second)};lapse.start<0&&(lapse.start=0),lapse.end>API.totalTime&&(lapse.end=API.totalTime),scope.thumbnailContainer={left:thPos+"px"},scope.thumbnails={"background-image":"none"};for(var i=0,l=scope.vgThumbnails.length;l>i;i++){var th=scope.vgThumbnails[i];if(th.timeLapse.end>=0){if(lapse.start>=th.timeLapse.start&&(lapse.end<=th.timeLapse.end||lapse.end<=th.timeLapse.start)){scope.thumbnails={"background-image":'url("'+th.params.thumbnail+'")'};break}}else if(th.timeLapse.start>=lapse.start&&th.timeLapse.start<=lapse.end){scope.thumbnails={"background-image":'url("'+th.params.thumbnail+'")'};break}}}},scope.onMouseMove=function($event){var second=Math.round($event.offsetX*API.mediaElement[0].duration/slider.scrollWidth);scope.updateThumbnails(second),scope.$apply()},scope.onTouchMove=function($event){var touches=$event.touches,touchX=scope.getOffset(touches[0]),second=Math.round(touchX*API.mediaElement[0].duration/slider.scrollWidth);scope.updateThumbnails(second),scope.$apply()},scope.onMouseLeave=function(event){scope.thumbnails=!1,scope.$apply()},scope.onTouchLeave=function(event){scope.thumbnails=!1,scope.$apply()},scope.onDestroy=function(){elem.unbind("touchmove",scope.onTouchMove),elem.unbind("touchleave",scope.onTouchLeave),elem.unbind("touchend",scope.onTouchLeave),elem.unbind("mousemove",scope.onMouseMove),elem.unbind("mouseleave",scope.onMouseLeave)};var thLoader;isStrip?(thLoader=new Image,thLoader.onload=scope.onLoadThumbnails.bind(scope),thLoader.src=scope.vgThumbnails):(thLoader=new Image,thLoader.onload=scope.onLoadThumbnail.bind(scope),thLoader.src=scope.vgThumbnails[0].params.thumbnail),VG_UTILS.isMobileDevice()?(elem.bind("touchmove",scope.onTouchMove),elem.bind("touchleave",scope.onTouchLeave),elem.bind("touchend",scope.onTouchLeave)):(elem.bind("mousemove",scope.onMouseMove),elem.bind("mouseleave",scope.onMouseLeave)),scope.$on("destroy",scope.onDestroy.bind(scope))}}}]),angular.module("com.2fdevs.videogular.plugins.controls").run(["$templateCache",function($templateCache){$templateCache.put("vg-templates/vg-scrub-bar",'<div role="slider" aria-valuemax="{{ariaTime(API.totalTime)}}" aria-valuenow="{{ariaTime(API.currentTime)}}" aria-valuemin="0" aria-label="Time scrub bar" tabindex="0" ng-keydown="onScrubBarKeyDown($event)"></div><div ng-transclude></div>')}]).directive("vgScrubBar",["VG_STATES","VG_UTILS",function(VG_STATES,VG_UTILS){return{restrict:"E",require:"^videogular",transclude:!0,templateUrl:function(elem,attrs){return attrs.vgTemplate||"vg-templates/vg-scrub-bar"},scope:{vgThumbnails:"="},link:function(scope,elem,attr,API){var isSeeking=!1,isPlaying=!1,isPlayingWhenSeeking=!1,LEFT=37,RIGHT=39,NUM_PERCENT=5,thumbnailsWidth=0,thumbWidth=0,slider=elem[0].querySelector("div[role=slider]"),touchStartX=0;elem[0].scrollWidth;if(scope.thumbnails=!1,scope.thumbnailContainer={},scope.API=API,scope.onLoadThumbnails=function(event){thumbnailsWidth=event.path[0].naturalWidth,thumbWidth=thumbnailsWidth/100},scope.ariaTime=function(time){return Math.round(time/1e3)},scope.getOffset=function(event){for(var el=event.target,x=0;el&&!isNaN(el.offsetLeft);)x+=el.offsetLeft-el.scrollLeft,el=el.offsetParent;return event.clientX-x},scope.onScrubBarTouchStart=function($event){var event=$event.originalEvent||$event,touches=event.touches,touchX=scope.getOffset(touches[0]);isSeeking=!0,isPlaying&&(isPlayingWhenSeeking=!0),API.pause(),API.seekTime(touchX*API.mediaElement[0].duration/slider.scrollWidth),scope.$apply()},scope.onScrubBarTouchEnd=function($event){$event.originalEvent||$event;isPlayingWhenSeeking&&(isPlayingWhenSeeking=!1,API.play()),isSeeking=!1,scope.$apply()},scope.onScrubBarTouchMove=function($event){var event=$event.originalEvent||$event,touches=event.touches,touchX=scope.getOffset(touches[0]);if(scope.vgThumbnails&&scope.vgThumbnails.length){var second=Math.round(touchX*API.mediaElement[0].duration/slider.scrollWidth),percentage=Math.round(100*second/(API.totalTime/1e3));scope.updateThumbnails(percentage)}isSeeking&&API.seekTime(touchX*API.mediaElement[0].duration/slider.scrollWidth),scope.$apply()},scope.onScrubBarTouchLeave=function(event){isSeeking=!1,scope.thumbnails=!1,scope.$apply()},scope.onScrubBarMouseDown=function(event){event=VG_UTILS.fixEventOffset(event),event.preventDefault();var offsetX=event.clientX+touchStartX-elem[0].offsetLeft;isSeeking=!0,isPlaying&&(isPlayingWhenSeeking=!0),API.pause(),API.seekTime(offsetX*API.mediaElement[0].duration/elem[0].scrollWidth),scope.$apply()},scope.onScrubBarMouseUp=function(event){isSeeking&&(event=VG_UTILS.fixEventOffset(event),isPlayingWhenSeeking&&(isPlayingWhenSeeking=!1,API.play()),isSeeking=!1,scope.$apply())},scope.onScrubBarMouseMove=function(event){if(scope.vgThumbnails&&scope.vgThumbnails.length){var second=Math.round(event.offsetX*API.mediaElement[0].duration/slider.scrollWidth),percentage=Math.round(100*second/(API.totalTime/1e3));scope.updateThumbnails(percentage)}if(isSeeking){event=VG_UTILS.fixEventOffset(event);var offsetX=event.clientX+touchStartX-elem[0].offsetLeft;offsetX>=elem[0].scrollWidth?offsetX=elem[0].scrollWidth-.1:touchStartX>=offsetX&&(offsetX=touchStartX),API.seekTime(offsetX*API.mediaElement[0].duration/elem[0].scrollWidth)}scope.$apply()},scope.onScrubBarMouseLeave=function(event){isSeeking=!1,scope.thumbnails=!1,scope.$apply()},scope.onScrubBarKeyDown=function(event){var currentPercent=API.currentTime/API.totalTime*100;event.which===LEFT||event.keyCode===LEFT?(API.seekTime(currentPercent-NUM_PERCENT,!0),event.preventDefault()):(event.which===RIGHT||event.keyCode===RIGHT)&&(API.seekTime(currentPercent+NUM_PERCENT,!0),event.preventDefault())},scope.updateThumbnails=function(percentage){var bgPos=Math.round(thumbnailsWidth*percentage/100),thPos=slider.scrollWidth*percentage/100-thumbWidth/2;scope.thumbnailContainer={width:thumbWidth+"px",left:thPos+"px"},scope.thumbnails={"background-image":'url("'+scope.vgThumbnails+'")',"background-position":-bgPos+"px 0px"}},scope.setState=function(newState){if(!isSeeking)switch(newState){case VG_STATES.PLAY:isPlaying=!0;break;case VG_STATES.PAUSE:isPlaying=!1;break;case VG_STATES.STOP:isPlaying=!1}},scope.onDestroy=function(){elem.unbind("touchstart",scope.onScrubBarTouchStart),elem.unbind("touchend",scope.onScrubBarTouchEnd),elem.unbind("touchmove",scope.onScrubBarTouchMove),elem.unbind("touchleave",scope.onScrubBarTouchLeave),elem.unbind("mousedown",scope.onScrubBarMouseDown),elem.unbind("mouseup",scope.onScrubBarMouseUp),elem.unbind("mousemove",scope.onScrubBarMouseMove),elem.unbind("mouseleave",scope.onScrubBarMouseLeave)},scope.$watch(function(){return API.currentState},function(newVal,oldVal){newVal!=oldVal&&scope.setState(newVal)}),scope.vgThumbnails){var thLoader=new Image;thLoader.onload=scope.onLoadThumbnails.bind(scope),thLoader.src=scope.vgThumbnails}VG_UTILS.isMobileDevice()?(elem.bind("touchstart",scope.onScrubBarTouchStart),elem.bind("touchend",scope.onScrubBarTouchEnd),elem.bind("touchmove",scope.onScrubBarTouchMove),elem.bind("touchleave",scope.onScrubBarTouchLeave)):(elem.bind("mousedown",scope.onScrubBarMouseDown),document.documentElement.addEventListener("mouseup",scope.onScrubBarMouseUp),document.documentElement.addEventListener("mousemove",scope.onScrubBarMouseMove)),scope.$on("destroy",scope.onDestroy.bind(scope))}}}]),angular.module("com.2fdevs.videogular.plugins.controls").directive("vgTimeDisplay",[function(){return{require:"^videogular",restrict:"E",link:function(scope,elem,attr,API){scope.currentTime=API.currentTime,scope.timeLeft=API.timeLeft,scope.totalTime=API.totalTime,scope.isLive=API.isLive,scope.$watch(function(){return API.currentTime},function(newVal,oldVal){scope.currentTime=newVal}),scope.$watch(function(){return API.timeLeft},function(newVal,oldVal){scope.timeLeft=newVal}),scope.$watch(function(){return API.totalTime},function(newVal,oldVal){scope.totalTime=newVal}),scope.$watch(function(){return API.isLive},function(newVal,oldVal){scope.isLive=newVal})}}}]),angular.module("com.2fdevs.videogular.plugins.controls").run(["$templateCache",function($templateCache){$templateCache.put("vg-templates/vg-mute-button",'<button type="button" class="iconButton" ng-class="muteIcon" ng-click="onClickMute()" ng-focus="onMuteButtonFocus()" ng-blur="onMuteButtonLoseFocus()" ng-mouseleave="onMuteButtonLeave()" ng-keydown="onMuteButtonKeyDown($event)" aria-label="Mute"></button>')}]).directive("vgMuteButton",[function(){return{restrict:"E",require:"^videogular",templateUrl:function(elem,attrs){return attrs.vgTemplate||"vg-templates/vg-mute-button"},link:function(scope,elem,attr,API){var isMuted=!1,UP=38,DOWN=40,CHANGE_PER_PRESS=.05;scope.onClickMute=function(){isMuted?scope.currentVolume=scope.defaultVolume:(scope.currentVolume=0,scope.muteIcon={mute:!0}),isMuted=!isMuted,API.setVolume(scope.currentVolume)},scope.onMuteButtonFocus=function(){scope.volumeVisibility="visible"},scope.onMuteButtonLoseFocus=function(){scope.volumeVisibility="hidden"},scope.onMuteButtonLeave=function(){document.activeElement.blur()},scope.onMuteButtonKeyDown=function(event){var newVolume,currentVolume=null!=API.volume?API.volume:1;event.which===UP||event.keyCode===UP?(newVolume=currentVolume+CHANGE_PER_PRESS,newVolume>1&&(newVolume=1),API.setVolume(newVolume),event.preventDefault()):(event.which===DOWN||event.keyCode===DOWN)&&(newVolume=currentVolume-CHANGE_PER_PRESS,0>newVolume&&(newVolume=0),API.setVolume(newVolume),event.preventDefault())},scope.onSetVolume=function(newVolume){scope.currentVolume=newVolume,isMuted=0===scope.currentVolume,isMuted?newVolume>0&&(scope.defaultVolume=newVolume):scope.defaultVolume=newVolume;var percentValue=Math.round(100*newVolume);0==percentValue?scope.muteIcon={mute:!0}:percentValue>0&&25>percentValue?scope.muteIcon={level0:!0}:percentValue>=25&&50>percentValue?scope.muteIcon={level1:!0}:percentValue>=50&&75>percentValue?scope.muteIcon={level2:!0}:percentValue>=75&&(scope.muteIcon={level3:!0})},scope.defaultVolume=1,scope.currentVolume=scope.defaultVolume,scope.muteIcon={level3:!0},scope.onSetVolume(API.volume),scope.$watch(function(){return API.volume},function(newVal,oldVal){newVal!=oldVal&&scope.onSetVolume(newVal)})}}}]),angular.module("com.2fdevs.videogular.plugins.controls").run(["$templateCache",function($templateCache){$templateCache.put("vg-templates/vg-volume-bar",'<div class="verticalVolumeBar">              <div class="volumeBackground" ng-click="onClickVolume($event)" ng-mousedown="onMouseDownVolume()">                <div class="volumeValue"></div>                <div class="volumeClickArea"></div>              </div>            </div>')}]).directive("vgVolumeBar",["VG_UTILS",function(VG_UTILS){return{restrict:"E",require:"^videogular",templateUrl:function(elem,attrs){return attrs.vgTemplate||"vg-templates/vg-volume-bar"},link:function(scope,elem,attr,API){scope.mouseHoverVolume=!1,scope.isChangingVolume=!1;var volumeBackElem=angular.element(elem[0].getElementsByClassName("volumeBackground")),volumeValueElem=angular.element(elem[0].getElementsByClassName("volumeValue"));scope.onClickVolume=function(event){event=VG_UTILS.fixEventOffset(event);var volumeHeight=parseInt(volumeBackElem.prop("offsetHeight")),value=100*event.offsetY/volumeHeight,volValue=1-value/100;API.setVolume(volValue)},scope.onMouseDownVolume=function(){event.preventDefault(),scope.isChangingVolume=!0},scope.onMouseUpVolume=function(){scope.isChangingVolume&&(scope.isChangingVolume=!1,scope.mouseHoverVolume||(scope.volumeVisibility="hidden",scope.$apply()))},scope.onMouseMoveVolume=function(event){if(scope.isChangingVolume){event=VG_UTILS.fixEventOffset(event);var volumeHeight=parseInt(volumeBackElem.prop("offsetHeight")),offsetY=$(window).height()-event.clientY-volumeHeight;offsetY>=volumeHeight?offsetY=volumeHeight:0>=offsetY&&(offsetY=0);var value=offsetY/volumeHeight;API.setVolume(value)}},scope.updateVolumeView=function(value){value=100*value,volumeValueElem.css("height",value+"%"),volumeValueElem.css("top",100-value+"%")},scope.onChangeVisibility=function(value){elem.css("visibility",value)},elem.css("visibility",scope.volumeVisibility),document.documentElement.addEventListener("mouseup",scope.onMouseUpVolume),document.documentElement.addEventListener("mousemove",scope.onMouseMoveVolume),scope.$watch("volumeVisibility",scope.onChangeVisibility),scope.updateVolumeView(API.volume),scope.$watch(function(){return API.volume},function(newVal,oldVal){newVal!=oldVal&&scope.updateVolumeView(newVal)})}}}]),angular.module("com.2fdevs.videogular.plugins.controls").directive("vgVolume",["VG_UTILS",function(VG_UTILS){return{restrict:"E",link:function(scope,elem,attr){scope.onMouseOverVolume=function(){scope.mouseHoverVolume=!0,scope.$evalAsync(function(){scope.volumeVisibility="visible"})},scope.onMouseLeaveVolume=function(){scope.$evalAsync(function(){scope.mouseHoverVolume=!1,scope.isChangingVolume||(scope.volumeVisibility="hidden")})},scope.onDestroy=function(){elem.unbind("mouseover",scope.onScrubBarTouchStart),elem.unbind("mouseleave",scope.onScrubBarTouchEnd)},VG_UTILS.isMobileDevice()?elem.css("display","none"):(scope.volumeVisibility="hidden",elem.bind("mouseover",scope.onMouseOverVolume),elem.bind("mouseleave",scope.onMouseLeaveVolume)),scope.$on("destroy",scope.onDestroy.bind(scope))}}}]);