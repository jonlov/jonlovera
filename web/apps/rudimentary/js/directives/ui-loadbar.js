angular.module("app").factory("httpInterceptor",["$q","$rootScope","$log",function(a,b,c){var d=0;return{request:function(c,e){var f=c.config?c.config.loadbar:!0;return f&&(d++,b.$broadcast("loading",!0)),c||a.when(c)},response:function(c){return d&&0===--d&&b.$broadcast("loading",!1),c||a.when(c)},responseError:function(c){return d&&!--d&&b.$broadcast("loading",!1),a.reject(c)}}}]).config(["$httpProvider",function(a){a.interceptors.push("httpInterceptor")}]).directive("uiLoadbar",["$rootScope","$anchorScroll","$http","$timeout",function(a,b,c,d){return{restrict:"AC",template:'<span class="bar"></span>',link:function(a,c,d){a.$on("loading",function(a,d){return d?(b(),c.removeClass("hide").addClass("active")):c.addClass("hide").removeClass("active")}),c.addClass("loadbar hide")}}}]);